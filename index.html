<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>taylor.txt</title>
    <link href="main.css" rel="stylesheet">
    <link rel="icon" href="images/roachcartoon.png" type="image/x-icon">
  </head>
  <body>
    <article class="header-style">
      <p class="header-text">taylor.txt</p>
    </article>
    <div class="container"></div>

    <div class="container">
      <article class="year-index">2025</article>
    </div>

    <div class="container">
      <article class="bitcrunch">
        <article class="blur">
          <article class="paragraph">
            <img src="images/The_Bends_orb_test_red.png" class="cover">
          </article>

          <article class="paragraph">
            <p class="paragraph-text">BIT.CRUNCH.</p>
            <p class="paragraph-text">taylor.txt</p>
            <audio controls class="audio-module">
              <source src="audio_examples/1463838_BITCRUNCH.mp3" type="audio/mpeg" >
              Your browser does not support the audio element.
            </audio>
            <article class="links">
              <a href="https://www.newgrounds.com/audio/listen/1463838"><img src="images/newgrounds.png" class="logo newgrounds"></a>
            </article>
          </article>
        </article>
      </article>
    </div>

    <div class="container">
      <article class="year-index">2024</article>
    </div>

    <div class="container">
      <article class="mouthful">
        <article class="blur">
          <article class="paragraph">
            <img src="images/babasweeny.png" class="cover">
          </article>

          <article class="paragraph">
            <p class="paragraph-text">Mouthful!</p>
            <p class="paragraph-text">taylor.txt, Babasweeney & the Bug Eaters</p>
            <audio controls class="audio-module">
              <source src="audio_examples/Mouthful.mp3" type="audio/mpeg" >
              Your browser does not support the audio element.
            </audio>
            <article class="links">
              <a href="https://open.spotify.com/track/1qKCwi9tAZkAjLVULuh86g?si=be2162e97aa0405a"><img src="images/spotify.png" class="logo"></a>
              <a href="https://www.newgrounds.com/audio/listen/1369835"><img src="images/newgrounds.png" class="logo newgrounds"></a>
              <a href="https://www.youtube.com/watch?v=sHS77WkV168&ab_channel=RoachBoarderProductions"><img src="images/youtube.png" class="logo"></a>
            </article>
          </article>
        </article>
      </article>
    </div>

    <div class="ac-container">
      <article class="everything-happens">
        <article class="light-blur">
          <p>Album: Everything Happens</p>
        </article>
        <article class="blur">
          <article>
            <article class="album-cover">
              <img src="images/everything happens.jpg" class="cover">
            </article>
            <article class="links">
              <a href="https://open.spotify.com/album/0vAtO4slXTKOozFwTltehq?si=IHJ-_UzASoK75sSZ0vxkoA"><img src="images/spotify.png" class="logo"></a>
              <a href="https://www.newgrounds.com/audio/listen/1317420"><img src="images/newgrounds.png" class="logo newgrounds"></a>
              <a href="https://taylor-txt.bandcamp.com/album/everything-happens"><img src="images/bandcamp.png" class="logo"></a>
              <a href="https://www.youtube.com/watch?v=dkNdezNLzds&list=OLAK5uy_kvpY8RTob9sV9rEingVXrX-GRbf1f-2v8&ab_channel=taylor.txt-Topic"><img src="images/youtube.png" class="logo"></a>
            </article>
          </article>

          <!-- Song 1 -->
          <article class="album-paragraph">
            <article class="album-song">
              <p class="paragraph-text">1. Entropy</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1317420_Entropy(1).mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 2 -->
            <article class="album-song">
              <p class="paragraph-text">2. 6 AM</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369372_6-AM.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 3 -->
            <article class="album-song">
              <p class="paragraph-text">3. Dial-Up!</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369373_Dial-Up.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 4 -->
            <article class="album-song">
              <p class="paragraph-text">4. In Good Company</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369700_Songbird.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 5 -->
            <article class="album-song">
              <p class="paragraph-text">5. mental noise</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369375_mental-noise.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 6 -->
            <article class="album-song">
              <p class="paragraph-text">6. Songbird</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369700_Songbird.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 7 -->
            <article class="album-song">
              <p class="paragraph-text">7. fleeting feeling</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369704_fleeting-feeling(1).mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 8 -->
            <article class="album-song">
              <p class="paragraph-text">8. Wishing (You) Well</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369709_Wishing-You-Well.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 9 -->
            <article class="album-song">
              <p class="paragraph-text">9. timeflower</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369711_timeflower.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 10 -->
            <article class="album-song">
              <p class="paragraph-text">10. Fizzle</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369714_Fizzle.mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>

            <!-- Song 11 -->
            <article class="album-song-end">
              <p class="paragraph-text">11. everything happens</p>
              <p class="paragraph-text">taylor.txt</p>
              <audio controls class="audio-module">
                <source src="audio_examples/1369715_everything-happens(1).mp3" type="audio/mpeg" >
                Your browser does not support the audio element.
              </audio>
            </article>
          </article>
        </article>
      </article>
    </div>

  </body>

  <div id="audio-gradient-overlay" aria-hidden="true"></div>

  <!-- RAINBOW BG SCRIPT -->
  <script>
    (function () {
      const overlay = document.getElementById('audio-gradient-overlay');
      const players = Array.from(document.querySelectorAll('audio'));
      const playing = new Set();

      function update() {
        if (playing.size > 0) {
          document.body.classList.add('is-playing');
          overlay.classList.add('on');
        } else {
          document.body.classList.remove('is-playing');
          overlay.classList.remove('on');
        }
      }

      players.forEach(a => {
        a.addEventListener('play', () => {
          players.forEach(b => { if (b !== a && !b.paused) b.pause(); });
          playing.add(a);
          update();
        });
        a.addEventListener('playing', () => { playing.add(a); update(); });
        a.addEventListener('pause',   () => { playing.delete(a); update(); });
        a.addEventListener('ended',   () => { playing.delete(a); update(); });
        a.addEventListener('abort',   () => { playing.delete(a); update(); });
        a.addEventListener('emptied', () => { playing.delete(a); update(); });
      });
    }());
  </script>

  <!-- EQUALIZER SCRIPT -->
  <script>
    (function () {
      const players = Array.from(document.querySelectorAll('audio'));
      const graphs = new Map();

      players.forEach(a => {
        const host =
          a.closest('.album-song, .album-song-end') || a.closest('.blur');

        if (!host) return;

        const eq = document.createElement('div');
        eq.className = 'eq-stack';
        for (let i = 0; i < 5; i++) {
          const bar = document.createElement('div');
          bar.className = 'eq-bar';
          eq.appendChild(bar);
        }
        host.appendChild(eq);

        graphs.set(a, { eq, bars: Array.from(eq.children), raf: null });
      });

      function ensureGraph(audio) {
        const g = graphs.get(audio);
        if (!g) return null;
        if (g.ac) return g;

        const ac = new (window.AudioContext || window.webkitAudioContext)();
        const src = ac.createMediaElementSource(audio);
        const analyser = ac.createAnalyser();
        analyser.fftSize = 512;
        const data = new Uint8Array(analyser.frequencyBinCount);

        src.connect(analyser);
        analyser.connect(ac.destination);

        Object.assign(g, { ac, src, analyser, data, levels: new Float32Array(5).fill(0) });
        return g;
      }

      function bandRanges(binCount, sampleRate = 44100) {

        const hzPerBin = (sampleRate / 2) / binCount;
        const stops = [60, 250, 500, 2000, 6000, 16000];
        const idx = stops.map(hz => Math.min(binCount - 1, Math.max(0, Math.round(hz / hzPerBin))));
        const ranges = [];
        for (let i = 0; i < 5; i++) ranges.push([idx[i], idx[i + 1]]);
        return ranges;
      }

      function startEQ(audio) {
        graphs.forEach((g, a) => {
          if (a !== audio) stopEQ(a, true);
        });

        const g = ensureGraph(audio);
        if (!g) return;

        const { ac, analyser, data, eq, bars } = g;
        if (ac.state === 'suspended') ac.resume().catch(() => {});

        eq.classList.add('on');

        const ranges = bandRanges(analyser.frequencyBinCount, ac.sampleRate);
        const maxWidth = parseFloat(getComputedStyle(eq).width) || 160;

        cancelAnimationFrame(g.raf);
        const smooth = g.levels;

        function draw() {
          analyser.getByteFrequencyData(data);

          for (let i = 0; i < 5; i++) {
            const [s, e] = ranges[i];
            let sum = 0;
            for (let k = s; k < e; k++) sum += data[k];
            const avg = sum / Math.max(1, (e - s));
            const level = avg / 255;

            const smoothed = smooth[i] = smooth[i] * 0.8 + level * 0.2;
            bars[i].style.width = (smoothed * maxWidth) + 'px';
          }

          g.raf = requestAnimationFrame(draw);
        }

        draw();
      }

      function stopEQ(audio, soft = false) {
        const g = graphs.get(audio);
        if (!g) return;
        cancelAnimationFrame(g.raf);
        g.raf = null;

        if (soft) {
          g.bars.forEach(b => { b.style.transition = 'width .2s ease'; b.style.width = '0px'; });
          setTimeout(() => g.bars.forEach(b => (b.style.transition = '')), 220);
        } else {
          g.bars.forEach(b => (b.style.width = '0px'));
        }
        g.eq.classList.remove('on');
      }

      players.forEach(a => {
        a.addEventListener('play', () => startEQ(a));
        a.addEventListener('playing', () => startEQ(a));
        a.addEventListener('pause', () => stopEQ(a, true));
        a.addEventListener('ended', () => stopEQ(a, true));
        a.addEventListener('abort', () => stopEQ(a, true));
        a.addEventListener('emptied', () => stopEQ(a, true));
      });
    })();
  </script>
</html>